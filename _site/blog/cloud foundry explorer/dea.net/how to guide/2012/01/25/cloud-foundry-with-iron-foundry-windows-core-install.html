<!DOCTYPE html>
<html lang="en">
<head>
    <title>Cloud Foundry with Iron Foundry (Windows Core) Install - Iron Foundry</title>
    <meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="description" content="">
<meta name="author" content="">
<link href="/stylesheets/bootstrap.css" rel="stylesheet">
<script type="text/javascript" src="http://use.typekit.net/xvy7ell.js"></script> <script type="text/javascript">try{Typekit.load();}catch(e){}</script>
</head>

<body>

<div id="wrap">
    <header>
        <div class="backsplash">
            <img class="blur" src="/img/blog.jpg" />
            <svg version="1.1" xmlns="http://www.w3.org/2000/svg">
                <filter id="blur">
                    <feGaussianBlur stdDeviation="5" />
                </filter>
            </svg>
        </div>
        <div class="container menu">
            <div class="row">
    <div class="col-lg-2">
        <a href="/"><img src="/img/logo-ironfoundry.png" alt="Iron Foundry" /></a>
    </div>
    <div class="col-lg-10">
        <ul class="list-unstyled list-inline pull-right">
            <li><a href="/downloads.html">Downloads</a></li>
            <li><a href="/signup.html">Sign Up</a></li>
            <li><a href="/blog">Blog</a></li>
            <li><a href="/help.html">Help</a></li>
            <li><a href="/about.html">About</a></li>
            <li class="fork"><iframe src="http://ghbtns.com/github-btn.html?user=IronFoundry&repo=IronFoundry&type=fork&size=large" allowtransparency="true" frameborder="0" scrolling="0" width="81" height="31"></iframe></li>
        </ul>
    </div>
</div>
        </div>
        <div class="container">
            <div class="row hero">
                <h1 class="text-center">BLOG</h1>
            </div>
        </div>
    </header>
        
    <div class="container content-container">
        <div class="row">
    <div class="col-lg-9">
        <div class="row">
            <div class="col-lg-2">
            	<div class="author-info">
                    <div class="author-name">
                        
                            Tier 3
                        
                    </div>
                    
            	</div>
            </div>
            <div class="col-lg-10">
                <h2>Cloud Foundry with Iron Foundry (Windows Core) Install</h2>
                <span></span>
                <div>
<p class="c0"><img src="http://help.ironfoundry.org/attachments/token/zapjj9ooku5eroq/?name=image05.png" alt="image05.png" width="608" height="145" /></p>
<p class="c0"><span>Cloud Foundry has been taking the web by storm. PaaS is growing in popularity as more developers find the disruptively positive deployment scenarios that are possible over traditional environments. Cloud Foundry, primarily centered around Linux-based PaaS, now has a sibling called Iron Foundry.</span></p>
<p class="c0"><span>Iron Foundry is an open source project available for the Windows Server Environments with the ability to run the full spectrum of .NET Web Applications, SQL Server, and more. IronFoundry places the Microsoft tool stack on an even footing with the Linux-based stacks.</span></p>
<p class="c0"><img src="http://help.ironfoundry.org/attachments/token/dse6cx1a3lzo1re/?name=image04.png" alt="image04.png" width="613" height="393" /></p>

<h2 class="c0"><span class="c2">Step 1:  Get IronFoundry Installed and Running by </span><span class="c6 c2"><a class="c8" href="http://twitter.com/adron">Adron Hall</a></span></h2>
<p class="c0"><span>The first thing you’ll need is to be sure to get a USB Thumb Drive or some mechanism to get the .NET 4.0 &amp; IronFoundry Software onto the Windows Server 2008 Core Instance. If you’re using a full install of Windows Server 2008 then you can use the normal means to retrieve this software. The files you’ll want on the external storage include:</span></p>

<ol class="c12" start="1">
	<li class="c3"><span>.NET 4.0 Framework for Server Core (</span><span class="c6"><a class="c8" href="http://www.microsoft.com/download/en/details.aspx?id=22833">dotNetFx40_Full_x86_x64_SC.exe</a></span><span>)</span></li>
	<li class="c3"><span>IronFoundry DEA Service (</span><span class="c6"><a class="c8" href="http://www.ironfoundry.org/download">IronFoundry.Dea.Service.x86.msi</a></span><span> or </span><span class="c6"><a class="c8" href="https://github.com/downloads/IronFoundry/ironfoundry/IronFoundry.Dea.Service.x64.msi">IronFoundry.Dea.Service.x64.msi</a></span><span>)</span></li>
</ol>
<p class="c0"><span>Once you have the software downloaded to a medium to use, get a solid image of </span><span class="c6"><a class="c8" href="http://compositecode.com/2012/01/16/windows-server-2008-core-a-quick-run-down/">Windows 2008 Server Core up and running</a></span><span>. With the Windows 2008 Server Core command prompt get the following services installed and started with the following commands:</span></p>
<p class="c0 c10"><em>c:UsersMyUserNamestart /w ocsetup IIS-WebServerRole</em></p>
<p class="c0 c10"><em>c:UsersMyUserNamestart /w ocsetup WAS-NetFxEnvironment</em></p>
<p class="c0 c10"><em>c:UsersMyUserNamestart /w ocsetup IIS-ISAPIExtensions</em></p>
<p class="c0 c10"><em>c:UsersMyUserNamestart /w ocsetup IIS-ISAPIFilter</em></p>
<p class="c0 c10"><em>c:UsersMyUserNamestart /w ocsetup IIS-NetFxExtensibility</em></p>
<p class="c0 c10"><em>c:UsersMyUserNamestart /w ocsetup IIS-ASPNET</em></p>
<p class="c0 c10"><em>c:UsersMyUserNamestart /w ocsetup MicrosoftWindowsPowerShell</em></p>
<p class="c0 c10"><em>c:UsersMyUserNamestart /w ocsetup ServerCore-WOW64</em></p>
<p class="c0 c10"><em>c:UsersMyUserNamestart /w ocsetup NetFx2-ServerCore</em></p>
<p class="c0 c10"><em>c:UsersMyUserNamestart /w ocsetup NetFx2-ServerCore-WOW64</em></p>
<p class="c0"><img src="http://help.ironfoundry.org/attachments/token/npfp0lgocjivhdz/?name=image01.png" alt="image01.png" width="693" height="355" /></p>
<p class="c0"><span>After these services are started, copy the software off of the USB / Storage Device that has .NET 4.0 and the IronFoundry DEA. In the below copy command, “e:” is the storage device.</span><span> </span></p>
<p class="c0"><em>        e:copy *.* c:UsersMyUserName</em></p>
<p class="c0"><span>Now execute the .NET 4.0 Framework (</span><span class="c6"><a class="c8" href="http://www.microsoft.com/download/en/details.aspx?id=22833">dotNetFx40_Full_x86_x64_SC.exe</a></span><span>) for Windows 2008 Server Core.</span></p>
<p class="c0"><em>        c:UsersMyUserNamedotNetFx40_Full_x86_x64_SC.exe</em></p>
<p class="c0"><span>From this point a standard Windows Wizard will display to step through the rest of the .NET 4.0 Server Core Installation. The next step is to enable IIS Remote Administration:</span><span> </span></p>
<p class="c0"><span>        c:UsersMyUserNamereg add HKEY_LOCAL_MACHINESOFTWAREMicrosoftWebManagementServer /v EnableRemoteManagement /t REG_DWORD /d 1</span></p>
<p class="c0"><span>At this point it is actually a good idea to reboot the server to insure all the services start correctly and the registry setting takes effect. I’m sure that just simply restarting the services might work, but when playing with the registry I like to stay safe and insure everything is set and has taken effect.</span></p>
<p class="c0"><span>After the reboot, start wmsvc.</span></p>
<p class="c0"><em>        c:UsersMyUserNamenet start wmsvc</em></p>
<p class="c0"><span>Now kick off the </span><span class="c6"><a class="c8" href="https://github.com/downloads/IronFoundry/ironfoundry/IronFoundry.Dea.Service.x64.msi">IronFoundry DEA Installation</a></span><span>. When the wizard prompts for configuration information, enter the following:</span></p>

<ol class="c12" start="1">
	<li class="c3"><span>NATS Host: 10.0.0.1</span></li>
	<li class="c3"><span>NATS Port: 4222</span></li>
	<li class="c3"><span>App Directory: C:IronFoundryapps</span></li>
	<li class="c3"><span>Droplet Directory: C:IronFoundrydroplets</span></li>
	<li class="c3"><span>Install Directory: C:Program FilesIron FoundryDEA</span></li>
</ol>
<p class="c0"><span>Once the wizard is complete, then go to c:Program FilesIron FoundryDEA and run the DEA executable. This will start the IronFoundry DEA Service and insure it kicks off (self starting) anytime the server may be rebooted.</span></p>

<h2 class="c0"><span class="c2">Step 2:  Deploy an ASP.NET MVC Application by </span><span class="c6 c2"><a class="c8" href="https://twitter.com/#!/jaredwray">Jared Wray</a></span></h2>
<p class="c0"><span class="c14">Deploying an ASP.NET MVC application could not be easier when using Iron Foundry and the accompanying tools. There are three ways to deploy your application to Iron Foundry:</span></p>

<ol class="c12" start="1">
	<li class="c3"><span>Visual Studio: The Iron Foundry plugin for Visual Studio allows you to push your application to any Cloud Foundry environment supporting .NET.</span></li>
	<li class="c3"><span>Cloud Foundry Explorer: The Cloud Foundry Explorer is a .NET Windows application that allows you to manage multiple cloud instances from a Windows desktop including all of the code and service deployment.</span></li>
	<li class="c3"><span>Command Line (VMC): This is the command line version with all of the features that you see from the plugin and explorer.</span></li>
</ol>
<p class="c0"><span>You can download these from Iron Foundry at: </span><span class="c6"><a href="http://www.ironfoundry.org/download">http://www.ironfoundry.org/download</a></span><span> </span></p>
<p class="c0"><strong>Getting down to code a deployment…</strong><span> </span></p>
<p class="c0"><span>Lets first start out with downloading and installing the Visual Studio Plugin from Iron Foundry. Go to </span><span class="c6"><a href="http://www.ironfoundry.org/download">http://www.ironfoundry.org/download</a></span><span> and download the latest. After it is downloaded double click the file and do the install.  After the install is done open up Visual Studio and go to Tools &gt; Extension Manager &gt; From there you should see it installed:</span></p>
<p class="c0"><img src="http://help.ironfoundry.org/attachments/token/itqsuvsnpodrrjx/?name=image00.png" alt="image00.png" width="491" height="61" /></p>
<p class="c0"><span>Lets go ahead and write a simple ASP.NET MVC (MVC 3 is being used in this and can be downloaded here: </span><span class="c6"><a href="http://www.asp.net/mvc">http://www.asp.net/mvc</a><a class="c8" href="http://www.asp.net/mvc)">)</a></span><span> application by creating a simple “Hello World” application for testing. In Visual Studio do the following:</span></p>

<ol class="c12" start="1">
	<li class="c3"><span>Go to File &gt; New Project</span></li>
	<li class="c3"><span>Select the ASP.NET MVC 3 Web Application, set the name, location, and solution name and click “ok”</span></li>
	<li class="c3"><span>On the next screen you will be prompted with the “Project Template” and you can select “Empty” and your view engine as “Razor”.</span></li>
</ol>
<p class="c0"><span>Now we have setup the project we are going to write a simple page and publish it to an Iron Foundry instance.</span></p>

<ol class="c12" start="1">
	<li class="c3"><span>From the Solution Explorer right click on the “Controllers” folder and go to Add &gt; Controller.</span></li>
	<li class="c3"><span>The “Add Controller” dialogue window will come up and name it “HomeController” then click the “Add” button.</span></li>
	<li class="c3"><span>Next step is to add the Index View for the Home controller. You can do this by the following:</span></li>
</ol>
<ol class="c13" start="1">
	<li class="c4"><span>Go to the “Views” folder &gt; Create a folder called “Home” inside it</span></li>
	<li class="c4"><span>Right click on the “Home” folder that was just created and Add &gt; View. Name the View “Index.”</span></li>
</ol>
<span>In the Views &gt; Home &gt; Index.cshtml file modify the code to be:
</span><img src="http://help.ironfoundry.org/attachments/token/8inunz2noc07acu/?name=image06.png" alt="image06.png" width="439" height="308" />
<p class="c0"><em><strong>(NOTE: Make sure you have compiled the site at least once before pushing it live for the first time.)</strong></em></p>
<p class="c0"><span>
</span></p>
<p class="c0"><span>With the </span><span class="c6"><a class="c8" href="http://www.ironfoundry.org/download">Visual Studio Plugin from Iron Foundry</a></span><span> it is very easy to do a deployment/update from. All you will need to do is define your Cloud Foundry instance with Iron Foundry support and then “Push” your application.</span></p>
<p class="c0"><span>Define your Cloud Foundry instance with Iron Foundry Support:</span></p>

<ol>
	<li>
<ol>
	<li class="c3"><span>From Visual Studio Go to Tools &gt; Cloud Foundry Explorer</span></li>
	<li class="c3"><span>From Cloud Foundry Explorer click the add new cloud button.</span><img alt="" /></li>
	<li class="c3"><span>Enter in the following data:</span>
<ol>
	<li class="c4"><span>Server Name: The friendly name of the Cloud Foundry instance you plan to connect to. For this example we will use the</span></li>
</ol>
</li>
</ol>
</li>
</ol>
<span class="c6"><a class="c8" href="http://www.ironfoundry.org/signup">Iron Foundry Trial</a></span><span> environment (api.gofoundry.net)</span>
<ol>
	<li>
<ol>
	<li class="c4"><span>Runtime Environment:  Select the correct runtime environment (right now it should default to: Cloud Foundry Runtime v1.0).</span></li>
	<li class="c4"><span>Register/Logon Info: The Email, and Password are what you need to logon to your Cloud Foundry instance.</span></li>
	<li class="c4"><span>URL: To setup the url of your cloud foundry instance do the following:</span></li>
</ol>
</li>
	<li class="c11"><span>Click on the “Manage Cloud…” button.</span></li>
	<li class="c11"><span>From the Manage Cloud Urls… window click “Add”</span></li>
	<li class="c11"><span>From the Add Cloud Url.. window type the Name and URL such as:</span>
<ol>
	<li class="c7"><span>Name: Iron Foundry Trial</span></li>
	<li class="c7"><span>Url: </span><span class="c6"><a href="http://api.gofoundry.net">http://api.gofoundry.net</a></span></li>
	<li class="c11"><span>Click Ok.</span></li>
</ol>
</li>
	<li class="c11"><span>From the Manage Cloud Urls… window verify that your URL has been added and click ok.
</span><img src="http://help.ironfoundry.org/attachments/token/w0bkq0arl7wrx3y/?name=image07.png" alt="image07.png" width="615" height="367" /><span> </span></li>
	<li class="c3"><span>Once you have entered the information correctly click to validate account and you will see an“Account Valid” message appear.</span></li>
	<li class="c3"><span>Close out the Cloud Foundry Explorer window as you are now ready to push your application!</span></li>
	<li><span>Push your Application (The Cool Stuff!)</span></li>
</ol>
<p class="c0"><span>Now that you have been able to setup your Cloud Foundry instance running Iron Foundry you can now push and update your application by doing the following:</span></p>

<ol>
	<li class="c3"><span>Right click on your project and then go to “Push Cloud Foundry Application…</span></li>
	<li class="c3"><img src="http://help.ironfoundry.org/attachments/token/s8pqmfuk0vqweuj/?name=image02.png" alt="image02.png" width="470" height="413" /></li>
	<li class="c3"><span>From the Push Cloud Foundry Application select the correct settings:</span></li>
	<li class="c4"><span>Cloud: Select the cloud you entered above.</span></li>
	<li class="c4"><span>Name: Enter in any name you want for the application.</span></li>
	<li class="c4"><span>URL: enter in the full url of the application. Here we will use </span><span class="c6"><a class="c8" href="http://helloworld23451.gofoundry.net/">helloworld23451.gofoundry.net</a></span><span>.</span></li>
	<li class="c4"><span>Memory Limit: Select the amount of memory you want your application to use.</span></li>
	<li class="c4"><span>Instances: Select the number of instances you want your application running on.</span></li>
	<li class="c4"><span>Select the services you want to bind to your application such as a database.</span></li>
</ol>
<p class="c0"><img src="http://help.ironfoundry.org/attachments/token/hiv9zl1l5wmatl9/?name=image03.png" alt="image03.png" width="596" height="497" /></p>
<p class="c0"><span>Click the “Push” and it will package it up and push it live doing all the configuration of the services and application into Cloud Foundry with Iron Foundry.</span></p>

</div>

            </div>
        </div>
    </div>
    <div class="col-lg-3">
        TAGS
    </div>
</div>
    </div>
    
    <div id="push"></div>
</div>
    
<footer>
    <div class="container">
        <h4>Provided by Tier 3</h4>
        <p>Iron Foundry is a project initiated by <a href="http://www.tier3.com">Tier 3</a>, an enterprise cloud computing and hosting platform.</p>
        <p>Cloud Foundry and Micro Cloud Foundry are trademarks of Pivotal Labs in the United States and/or other jurisdictions.</p>
    </div>
</footer>

<script src="/javascripts/jquery-2.0.3.min.js"></script>
<script src="/javascripts/bootstrap.js"></script>

</body>
</html>