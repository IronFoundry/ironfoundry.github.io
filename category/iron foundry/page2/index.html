<!DOCTYPE html>
<html lang="en">
<head>
    <title>Blog - Iron Foundry</title>
    <meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="description" content="">
<meta name="author" content="">
<link href="/stylesheets/bootstrap.css" rel="stylesheet">
<script type="text/javascript" src="http://use.typekit.net/xvy7ell.js"></script> <script type="text/javascript">try{Typekit.load();}catch(e){}</script>
<script type="text/javascript">

  var _gaq = _gaq || [];
  _gaq.push(['_setAccount', 'UA-4936699-7']);
  _gaq.push(['_trackPageview']);

  (function() {
    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
    ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
  })();

</script>
</head>

<body>

<div id="wrap">
    <header class="header-short backsplash blog">
        <div class="container menu">
            <div class="navbar">
  <div class="container">
  	<!-- .navbar-toggle is used as the toggle for collapsed navbar content -->
    <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-responsive-collapse">
      <span class="icon-bar"></span>
      <span class="icon-bar"></span>
      <span class="icon-bar"></span>
    </button>
    <div class="navbar-brand"><a href="/"><img src="/img/logo-ironfoundry.png" alt="Iron Foundry" /></a></div>
    <div class="nav-collapse collapse navbar-responsive-collapse">
      <ul class="nav navbar-nav menu pull-right">
          
            
            
            

            <li class="">
              <a href="http://app.ironfoundry.me/download">Downloads</a>
            </li>
          
            
            
            

            <li class="">
              <a href="http://app.ironfoundry.me/signup">Sign Up</a>
            </li>
          
            
            
            

            <li class="">
              <a href="/blog">Blog</a>
            </li>
          
            
            
            

            <li class="">
              <a href="/help">Help</a>
            </li>
          
            
            
            

            <li class="">
              <a href="/about">About</a>
            </li>
          
          <li class="fork"><iframe src="http://ghbtns.com/github-btn.html?user=IronFoundry&repo=IronFoundry&type=fork&size=large" allowtransparency="true" frameborder="0" scrolling="0" width="81" height="31"></iframe></li>
      </ul>
    </div>
  </div>
</div>
        </div>
        <div class="container">
            <div class="row hero">
                <h1 class="text-center">BLOG</h1>
            </div>
        </div>
        <div class="container photo-credit hidden-xs">
            <div class="photo-author">photo by Nathan Young</div>
        </div>
    </header>
        
    <div class="container content-container">
        <div class="row">
    <div class="col-lg-10">
		
			<h2>Category: 'iron foundry'</h2>		
		
		<hr />

        
            <div class="row post-index">
                <div class="col-lg-4 visible-lg">
                    <div class="author-info pull-right">
                        <div class="author-name">
                            
                                Iron Foundry
                            
                        </div>
                        
                    </div>
                </div>
                <div class="col-lg-8 post">
                    <h2><a href="/2012/09/12/contribute-to-iron-foundry/">Contribute to Iron Foundry, Here's How!</a></h2>
                    <div class="post-date">
                        Posted in how to guide, iron foundry,  &#183; September 12, 2012 
                        	<div class="hidden-lg">
                        	
                            
                            </div>
                    </div>
                    <p>We've been asked a few times, "<em>what's the quickest, easiest and fastest way to get the code, build it and contribute back to Iron Foundry?</em>" Here's a quick start for doing just that.

</p>
                    <a href="/2012/09/12/contribute-to-iron-foundry/">Read More</a>
                </div>
            </div>
        
            <div class="row post-index">
                <div class="col-lg-4 visible-lg">
                    <div class="author-info pull-right">
                        <div class="author-name">
                            
                                Iron Foundry
                            
                        </div>
                        
                    </div>
                </div>
                <div class="col-lg-8 post">
                    <h2><a href="/2012/08/22/iron-foundry-adds-microsoft-service-bus-as-a-new-application-service/">Iron Foundry Adds Microsoft Service Bus as a New Application Service</a></h2>
                    <div class="post-date">
                        Posted in how to guide, iron foundry, release, vmc,  &#183; August 22, 2012 
                        	<div class="hidden-lg">
                        	
                            
                            </div>
                    </div>
                    <p>Microsoft recently released a beta version of their <a href="http://msdn.microsoft.com/en-us/library/windowsazure/jj193027(v=azure.10).aspx" target="_blank">Service Bus for Windows</a> messaging technology, and the Iron Foundry team has now added this as an available service in Iron Foundry. The Service Bus for Windows is a scaled down version of the <a href="https://www.windowsazure.com/en-us/home/features/messaging/" target="_blank">Service Bus</a> product included in their Windows Azure cloud offering. The Service Bus for Windows, which supports brokered message through both traditional <a href="https://www.windowsazure.com/en-us/develop/net/how-to-guides/service-bus-queues/" target="_blank">Queues</a> and multi-subscriber <a href="https://www.windowsazure.com/en-us/develop/net/how-to-guides/service-bus-topics/" target="_blank">Topics</a>, provides Iron Foundry developers yet another option when building distributed applications.

Our awesome dev team followed the standard steps for adding new application services to a Cloud Foundry / Iron Foundry environment and also used a <a href="http://seroter.wordpress.com/2012/07/17/installing-and-testing-the-new-service-bus-for-windows/" target="_blank">previous write-up of mine</a> to guide the software installation. We’ve already updated the <a href="https://github.com/IronFoundry/vcap-services" target="_blank">vcap-services source code into Github</a> and you can clone the <a href="https://github.com/IronFoundry/vcap-services/tree/ironfoundry/mssb" target="_blank">mssb</a> (Microsoft Service Bus) directory today. There were also changes to the <a href="https://github.com/IronFoundry/ironfoundry/tree/master/src/IronFoundry.Dea" target="_blank">.NET DEA</a> to account for this new service and handing credentials back to the user. The Service Bus for Windows uses Microsoft SQL Server for its persistence tier, so we’ve tied the service to the instance of SQL Server that runs in Iron Foundry. <strong>Our hosted ironFoundry.me environment is running this today,</strong> and we’ve provisioned a shared Service Bus farm and host that holds each consumer’s individual namespace. Let’s see a demonstration of this in action!

To make life easier, we’ve built a sample web application that interacts with Service Bus Queues. We’ll start by looking at that application, and then deploy the application to Iron Foundry. The application contains a few ASP.NET Web Forms and a helper class. The helper class (<strong>QueueManager.cs</strong>)  contains a singleton that upon startup, parses Iron Foundry-provided URLs and credentials encoded as JSON in the application’s web.config file and uses those parameters to instantiate the core objects in the <a href="http://nuget.org/packages/ServiceBus.v1_0" target="_blank">Windows Service Bus SDK</a>.

<script src="https://gist.github.com/3429427.js"> </script>

Then we have some static operations for both sending to and receiving from the Service Bus Queue.

<script src="https://gist.github.com/3429452.js"> </script>

These operations are used in the pair of core ASP.NET pages to send and receive messages. Let’s now deploy this application to Iron Foundry and see how it works. Using vmc, I targeted the api.ironfoundry.me environment.

<img class="alignnone size-full wp-image-106" src="/img/blog/ironFoundryMssb02.png" alt="" width="450" height="236" />

I can confirm that the Service Bus for Windows is an available service by issuing a <strong>vmc services</strong> command.

<img class="alignnone size-full wp-image-107" src="/img/blog/ironFoundryMssb03.png" alt="" width="450" height="229" />

Great. Now let’s push this web application and provision an instance of this new service type. After publishing the ASP.NET web application to a file directory, I issued the <strong>vmc push</strong> command to start the deployment process.

<img class="alignnone size-full wp-image-108" src="/img/blog/ironFoundryMssb04.png" alt="" width="450" height="146" />

At this stage, I’m asked if I want to create a new service instance to bind to, or if I had already provisioned one, which instance I’d like to associate with. In this case, I have no existing services, so I’ll choose to create a new service.

<img class="alignnone size-full wp-image-109" src="/img/blog/ironFoundryMssb05.png" alt="" width="450" height="463" />

Within a matter of moments, my application is deployed and a new service instance is provisioned in the shared environment. This environment is not currently part of a Windows domain, so during service provisioning, a new local user is created and assigned to the developer’s own Service Bus namespace. All the URLs and credentials for the application are injected into the application’s web.config file. We can see this through vmc by viewing the file with the<strong> vmc files &lt;application name&gt; app/web.config</strong> command.

<img class="alignnone size-full wp-image-110" src="/img/blog/ironFoundryMssb06.png" alt="" width="450" height="451" />

These JSON-encoded values are then read by our application and used when authenticating the caller during Queue operations. Upon visiting the URL of the Iron Foundry application, we can see the option to send a message to a Queue.

<img class="alignnone size-full wp-image-111" src="/img/blog/ironFoundryMssb07.png" alt="" width="500" height="273" />

When we submit the message, it is added to a Queue, which means that it is persisted in a database. I then switch over to the “Receive” web form and choose to pull all of the messages from the Queue.

<img class="alignnone size-full wp-image-105" src="/img/blog/ironFoundryMssb08.png" alt="" width="500" height="253" />

The Service Bus for Windows is still in Beta, but we thought it would be fun to add this as an Iron Foundry service. You can <a href="/img/blog/IronFoundry.ServiceBusMessaging.WebUI_.zip" target="_blank">download the source code for this sample application from here</a>. Messaging is a core part of many modern web applications and the Service Bus for Windows gives Iron Foundry developers another way to link systems together.

<a rev="vote-for" href="http://dotnetshoutout.com/Iron-Foundry-Adds-Microsoft-Service-Bus-Support"><img alt="Shout it" src="http://dotnetshoutout.com/image.axd?url=http%3A%2F%2Fblog.ironfoundry.org%2F2012%2F08%2Firon-foundry-adds-microsoft-service-bus-as-a-new-application-service%2F" style="border:0px"/></a>


</p>
                    <a href="/2012/08/22/iron-foundry-adds-microsoft-service-bus-as-a-new-application-service/">Read More</a>
                </div>
            </div>
        
    </div>
</div>

<hr />


	


<div class="row">    
    <div class="col-lg-6">
    
        
            <a href="/category/iron foundry/">newer posts</a>
        
    
    </div>

    <div class="col-lg-6 text-right">
    
    </div>
</div>



<hr />
    </div>
    
    <div id="push"></div>
</div>
    
<footer>
    <div class="container">
    	<div class="row">
    		<div class="col-lg-12">
        <h4>Provided by Tier 3</h4>
        <p>Iron Foundry is a project initiated by <a href="http://www.tier3.com">Tier 3</a>, an enterprise cloud computing and hosting platform.</p>
        <p class="trademark"><a href="http://www.cloudfoundry.com" target="_blank">Cloud Foundry</a> and <a href="https://micro.cloudfoundry.com" target="_blank">Micro Cloud Foundry</a> are trademarks of <a href="http://pivotallabs.com" target="_blank">Pivotal Labs</a> in the United States and/or other jurisdictions.</p>
    		</div>
    	</div>
    </div>
</footer>

<script src="http://code.jquery.com/jquery-2.0.3.min.js"></script>
<script src="/javascripts/bootstrap.min.js"></script>

</body>
</html>